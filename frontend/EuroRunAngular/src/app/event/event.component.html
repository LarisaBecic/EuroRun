<div class="event-container" *ngIf="event">

  <h1>{{ event.name }}</h1>
  <p class="date">{{ event.dateTime | date:'fullDate' }}</p>

  <p class="description">{{ event.description }}</p>

  <div class="location">
    üìç {{ event.location.name }},
    {{ event.location.city.name }},
    {{ event.location.city.country.name }}
  </div>

  <button class="register-btn"
          *ngIf="loginInfo?.isLoggedIn"
          (click)="openWizard()">
    Register for event
  </button>

  <div class="wizard-backdrop" *ngIf="showWizard">
    <div class="wizard">

      <div *ngIf="wizardStep === 1">
        <h2>Your details</h2>

        <input [(ngModel)]="firstName" placeholder="First name">
        <input [(ngModel)]="lastName" placeholder="Last name">
        <input [(ngModel)]="email" placeholder="Email">
        <input [(ngModel)]="phoneNumber" placeholder="Phone">
        <input type="date" [(ngModel)]="dateOfBirth">

        <select [(ngModel)]="gender_id">
          <option *ngFor="let g of genders" [ngValue]="g.id">
            {{ g.name }}
          </option>
        </select>

        <div class="actions">
          <button (click)="updateUser()">Update details</button>
          <button (click)="wizardStep = 2">Next</button>
        </div>
      </div>

      <div *ngIf="wizardStep === 2">
        <h2>Registration info</h2>

        <input [(ngModel)]="club" placeholder="Club">
        <input [(ngModel)]="shirtSize" placeholder="Shirt size">
        <input type="number" [(ngModel)]="numberOfFinishedRaces" placeholder="Finished races">
        <input [(ngModel)]="eventDiscoverySource" placeholder="How did you hear about this event?">
        <textarea [(ngModel)]="note" placeholder="Health notes / comments"></textarea>

        <div class="actions">
          <button (click)="wizardStep = 1">Back</button>
          <button (click)="wizardStep = 3">Next</button>
        </div>
      </div>

      <div *ngIf="wizardStep === 3">
        <h2>Confirm registration</h2>

        <p><b>Name:</b> {{ firstName }} {{ lastName }}</p>
        <p><b>Event:</b> {{ event.name }}</p>
        <p><b>Date:</b> {{ event.dateTime | date }}</p>

        <div class="actions">
          <button (click)="wizardStep = 2">Back</button>
          <button class="confirm" (click)="addEventRegistration()">Confirm</button>
          <button class="cancel" (click)="closeWizard()">Cancel</button>
        </div>
      </div>

    </div>
  </div>
</div>
